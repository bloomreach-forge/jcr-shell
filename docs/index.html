<!DOCTYPE html>
    <!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-11-09 
 | Rendered using Hippo Forge Maven Skin 2.0.1 based on Apache Maven Fluido Skin
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                  <meta name="Date-Revision-yyyymmdd" content="20181109" />
              <meta http-equiv="Content-Language" content="en" />
      <title>JCR Shell &#x2013; JCR Shell</title>
  <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-2.0.1.min.css"/>
  <link rel="stylesheet" href="./css/forge-maven-skin-2.0.1.min.css"/>
  <link rel="stylesheet" href="./css/site.css" />
  <link rel="stylesheet" href="./css/print.css" media="print" />
  
  <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-2.0.1.min.js"></script>
  <script type="text/javascript" src="./js/forge-maven-skin-2.0.1.min.js"></script>

    </head>
<body class="topBarDisabled">
                        <a href="https://github.com/bloomreach-forge/jcr-shell">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
         alt="Fork me on GitHub">
  </a>
          <div class="container-fluid">
  <div id="banner">
    <div id="logo">
      <a href="http://www.github.com/onehippo-forge">
        <img src="./images/hipposkin/hippo-forge-logo.png" alt="Hippo Forge Logo" />
      </a>
    </div>
    <div class="pull-left">              <div id="bannerLeft">    <h1>JCR Shell</h1>
    </div>
              </div>
    <div class="pull-right"></div>
    <div class="clear"><hr/></div>
  </div>

  <div id="breadcrumbs">
    <div class="links">
      <a href="https://www.bloomreach.com">bloomreach.com</a>
      <a href="https://www.onehippo.org">onehippo.org</a>
    </div>
    <ul class="breadcrumb">
    
  <li id="publishDate">published: 2018-11-09  
  </li>
  
        
            </ul>
    <div class="clear"><hr/></div>
  </div>
<div class="row-fluid">
  <div id="leftColumn" class="span2">
    <div class="well sidebar-nav">
    
    <ul class="nav nav-list">
            <li class="nav-header">Main</li>
              <li class="active">  <a href="#"><span class="none"></span>Welcome</a>
  </li>
        <li>  <a href="release-notes.html" title="Release Notes">  <span class="none"></span>  Release Notes</a>  </li>
                  <li class="nav-header">Autogenerated Docs</li>
                                                                                                                                                                                                                                    <li>  <a href="project-info.html" title="Project Information">  <span class="icon-chevron-down"></span>  Project Information</a>  
    <ul class="nav nav-list">
                            <li>  <a href="plugin-management.html" title="Plugin Management">  <span class="none"></span>  Plugin Management</a>  </li>
                        <li>  <a href="distribution-management.html" title="Distribution Management">  <span class="none"></span>  Distribution Management</a>  </li>
                        <li>  <a href="dependency-info.html" title="Dependency Information">  <span class="none"></span>  Dependency Information</a>  </li>
                        <li>  <a href="source-repository.html" title="Source Repository">  <span class="none"></span>  Source Repository</a>  </li>
                        <li>  <a href="mail-lists.html" title="Mailing Lists">  <span class="none"></span>  Mailing Lists</a>  </li>
                        <li>  <a href="issue-tracking.html" title="Issue Tracking">  <span class="none"></span>  Issue Tracking</a>  </li>
                        <li>  <a href="integration.html" title="Continuous Integration">  <span class="none"></span>  Continuous Integration</a>  </li>
                        <li>  <a href="plugins.html" title="Project Plugins">  <span class="none"></span>  Project Plugins</a>  </li>
                        <li>  <a href="license.html" title="Project License">  <span class="none"></span>  Project License</a>  </li>
                        <li>  <a href="dependency-management.html" title="Dependency Management">  <span class="none"></span>  Dependency Management</a>  </li>
                        <li>  <a href="team-list.html" title="Project Team">  <span class="none"></span>  Project Team</a>  </li>
                        <li>  <a href="project-summary.html" title="Project Summary">  <span class="none"></span>  Project Summary</a>  </li>
                        <li>  <a href="dependencies.html" title="Dependencies">  <span class="none"></span>  Dependencies</a>  </li>
              </ul>
  </li>
        </ul>
    
          <hr />
      <div id="poweredBy">
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
              <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">  <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />  </a>
          </div>
    </div>
  </div>
  <div id="bodyColumn"  class="span10" >
    
  
    <div class="section">
<h2><a name="JCR_Shell"></a>JCR Shell</h2>

      
<div class="section">
<h3><a name="Introduction"></a>Introduction</h3>
        
<p>
          JCR Shell provides a command-line tool to get access to a remote
          <a class="externalLink" href="http://jackrabbit.apache.org/jcr/components/jackrabbit-web-application.html#JCR_Webdav_Server">JCR Webdav Server</a>
          which provides JCR API access over WebDAV/HTTP(S).
        </p>
        
<p>
          JCR Shell is a pure JCR/Jackrabbit based client tool. Therefore, this tool should work against any Apache Jackrabbit
          based JCR system.
        </p>
        
<div class="alert alert-info">
          
<p>
            If you want to use JCR Shell against Hippo CMS, enable <a class="externalLink" href="http://jackrabbit.apache.org/jcr/components/jackrabbit-web-application.html#JCR_Webdav_Server">JCR Webdav Server</a>
            in the system.
            See <a class="externalLink" href="https://bloomreach-forge.github.io/hippo-jcr-over-webdav/">Hippo Repository JCR/WebDAV Support</a>
            forge project homepage for detail.
          </p>
        </div>
      </div>

      
<div class="section">
<h3><a name="Download"></a>Download</h3>
        
<p>
          You can download an <i>executable</i> JAR file of JCR Shell from Bloomreach Forge Maven repository:
          <a class="externalLink" href="https://maven.onehippo.com/maven2-forge/org/onehippo/forge/jcrshell/jcrshell/">https://maven.onehippo.com/maven2-forge/org/onehippo/forge/jcrshell/jcrshell/</a>.
          Move to the latest version directory and download <tt>jcrshell-x.x.x.jar</tt> from there.
        </p>
      </div>

      
<div class="section">
<h3><a name="Run"></a>Run</h3>
        
<p>
          You can run JCR Shell like the following:
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
$ java -jar jcrshell-2.0.0.jar --server=&quot;http://localhost:8080/cms/server&quot; --user=&quot;admin:admin&quot;

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.0.4.RELEASE)

JCR Shell 2.0.0

exit or quit leaves program.
help lists commands.
jcr-shell:&gt; 

        </pre></div>
        </div>
      </div>

      
<div class="section">
<h3><a name="Available_Commands"></a>Available Commands</h3>
        
<p>
          You can execute <tt>help</tt> to see all the available commands with descriptions.
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
jcr-shell:&gt; help
----------------------------------------------------------------------------------------------------------------
Command             Usage                                                                           
----------------------------------------------------------------------------------------------------------------
aliases             aliases                                                                         
cd                  cd [&lt;path&gt;|&lt;reference property&gt;]                                                
cdprev              cdprev                                                                          
cduuid              cduuid &lt;uuid&gt;                                                                   
credentials         credentials &lt;username&gt;                                                          
exit                exit                                                                            
filecd              filecd &lt;path&gt;                                                                   
filelist            filelist [&lt;directory&gt;]                                                          
filepwd             filepwd &lt;path&gt;                                                                  
findreferences      findreferences                                                                  
finduuid            finduuid &lt;uuid&gt;                                                                 
help                help [&lt;command&gt;]                                                                
jexl                jexl &lt;path&gt; [&lt;argument&gt; [..]]                                                   
login               login                                                                           
logout              logout                                                                          
ls                  ls [&lt;path&gt;]                                                                     
mixinadd            mixinadd &lt;mixin type&gt;                                                           
mixinlist           mixinlist                                                                       
mixinremove         mixinremove &lt;mixin type&gt;                                                        
namespaceadd        namespaceadd &lt;prefix&gt; &lt;uri&gt;                                                     
namespacelist       namespacelist                                                                   
namespaceremove     namespaceremove &lt;prefix&gt;                                                        
nodeadd             nodeadd &lt;nodename&gt; [&lt;type&gt;]                                                     
nodeallowed         nodeallowed                                                                     
nodecheckin         checkin                                                                         
nodecheckout        checkout                                                                        
nodecopy            nodecopy &lt;nodename&gt; &lt;target parent&gt;/[name]                                      
nodediff            nodediff &lt;nodeame&gt; [&lt;path&gt;/]&lt;base&gt;                                              
nodeexport          nodeexport &lt;nodename&gt; &lt;xml file&gt; [&lt;skipBinaries&gt;]                               
nodeimport          nodeimport &lt;xml file&gt; [&lt;uuidBehavior&gt; [&lt;referenceBehavior&gt; [&lt;mergeBehavior&gt;]]]  
nodemove            nodemove &lt;nnodeame&gt; [&lt;path&gt;/]&lt;new nodename&gt;                                     
noderemove          noderemove &lt;nodename&gt;                                                           
nodetree            nodetree [&lt;levels&gt;]                                                             
nodetypeget         nodetypeget &lt;name&gt;                                                              
nodetypelist        nodetypelist [&lt;primary|mixin&gt;]                                                  
order               order &lt;child node&gt; (before|after|up|down|first|last) [&lt;child node&gt;]             
propadd             propadd &lt;property&gt; [&lt;type&gt;]                                                     
propallowed         propallowed                                                                     
propdelete          propdelete &lt;property&gt; [&lt;property&gt; [..]]                                         
propget             propget &lt;property&gt; [&lt;property&gt; [..]]                                            
proplist            proplist [&lt;node&gt;]                                                               
propload            propload &lt;binary property&gt; &lt;file&gt;                                               
propset             propset &lt;property&gt; &lt;value&gt; [&lt;type&gt;]                                             
propstore           propstore &lt;binary property&gt; &lt;file&gt;                                              
pwd                 pwd                                                                             
query               query &lt;sql|xpath&gt; &lt;statement&gt; [limit &lt;count&gt;]                                   
refresh             refresh                                                                         
reset               reset                                                                           
save                save                                                                            
server              server [&lt;http(s)_url&gt;]                                                          
sessionsave         sessionsave                                                                     
status              status                                                                          
syspropget          syspropget [&lt;property&gt;]                                                         
syspropset          syspropset &lt;property&gt; &lt;value&gt;                                                   
valueadd            valueadd &lt;propertyname&gt; &lt;value&gt; [&lt;type&gt;]                                        
valueremove         valueremove &lt;property&gt; &lt;value&gt; [&lt;type&gt;]                                         
versioncd           versioncd &lt;uuid&gt;                                                                
versioncreate       versioncreate [&lt;label&gt;]                                                         
versiondiff         versiondiff [version [&lt;otherversion&gt;]]                                          
versioninfo         versioninfo [&lt;version&gt;]                                                         
versionlabeladd     versionslabeladd &lt;version&gt; &lt;label&gt; [&lt;true|false&gt;]                               
versionlabelremove  versionslabelremove &lt;label&gt;                                                     
versionlist         versionlist                                                                     
versionremove       versionremove &lt;version&gt;|&lt;label&gt;                                                 
versionremoveall    versionremoveall                                                                
versionrestore      versionrestore &lt;version&gt;|&lt;label&gt; [&lt;true|false&gt;]                                 
versiontree         versiontree [&lt;levels&gt;]                                                          
----------------------------------------------------------------------------------------------------------------
Command completed in 27 msecs.
jcr-shell:&gt; 

        </pre></div>
        </div>
        
<p>
          You can execute <tt>help &lt;command&gt;</tt> to see the detail of the specific <tt>command</tt>
          like the following example:
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
jcr-shell:&gt; help pwd
Usage: pwd
   Show path to current node
Command completed in 0 msecs.

        </pre></div>
        </div>
      </div>

      
<div class="section">
<h3><a name="Example_Usage_Session_-_Setting_a_property"></a>Example Usage Session - Setting a property</h3>
        
<p>
          In this section, let's try to change a property value and save it, as an example.
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
jcr-shell:&gt; cd /webfiles/site

done.
Command completed in 879 msecs.

admin:/webfiles/site&gt; proplist
----------------------------------------------------------------------------------------------------------------
Name                Type    Value            
----------------------------------------------------------------------------------------------------------------
jcr:primaryType     Name    webfiles:bundle  
webfiles:anticache  String  1538775596692    
----------------------------------------------------------------------------------------------------------------
Command completed in 55 msecs.

admin:/webfiles/site&gt; propset webfiles:anticache 1538775596694
Command completed in 0 msecs.

admin:/webfiles/site&gt; propget webfiles:anticache 
1538775596694
Command completed in 25 msecs.

admin:/webfiles/site&gt; save
Node saved.
Command completed in 31 msecs.

jcr-shell:&gt; quit
Bye bye!

        </pre></div>
        </div>
      </div>

      
<div class="section">
<h3><a name="jexl_command"></a>jexl command</h3>
        
<p>
          The <tt>jexl</tt> command allows you to execute a
          <a class="externalLink" href="http://commons.apache.org/proper/commons-jexl/">JEXL</a> script file for more advanced use cases.
        </p>
        
<p>
          The following variables are provided to JEXL script files:
        </p>
        
<table border="0" class="table table-striped">
          
<tr class="a">
            
<th>Variable</th>
            
<th>Description</th>
          </tr>
          
<tr class="b">
            
<td><tt>arguments</tt></td>
            
<td>
              The command line arguments passed to the JEXL script.
              The first argument is the file path of the JEXL script,
              followed by other arguments for the JEXL script.
              For example, if you run <tt>&gt; jexl test.jexl 1 2 3</tt>, then
              the <tt>arguments</tt> variable will look like [ &quot;test.jexl&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot; ].
            </td>
          </tr>
          
<tr class="a">
            
<td><tt>out</tt></td>
            
<td>The output console, providing <tt>#println(CharSequence)</tt> method for JEXL scripts</td>
          </tr>
          
<tr class="b">
            
<td><tt>node</tt></td>
            
<td>The JCR node you are currently based on in the shell.</td>
          </tr>
        </table>
        
<p>
          Here's a very simple <a class="externalLink" href="http://commons.apache.org/proper/commons-jexl/">JEXL</a> script file example:
        </p>
        
<div class="brush: javascript">
        
<div class="source"><pre>
// ~/temp/test.jexl
var nu = new(&quot;org.apache.commons.lang3.math.NumberUtils&quot;);
var sum = 0;
for (arg : arguments) {
  // 0 on parsing error as the first arg item is actually the jexl script file name.
  sum += nu.toInt(arg, 0);
}
out.println(&quot;sum = &quot; + sum);
out.println(&quot;You're currently on &quot; + node.path + &quot;.&quot;);
return &quot;Optional return value to show after execution: Hello!&quot;;
        </pre></div>
        </div>
        
<p>
          Then you can execute the <a class="externalLink" href="http://commons.apache.org/proper/commons-jexl/">JEXL</a> script file
          like this:
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
admin:/&gt; cd content/documents
admin:...nt/documents&gt; jexl ~/temp/test.jexl 1 2 3 4 5 6 7 8 9
sum = 45
You're currently on /content/documents.
JEXL script executed. Return: Optional return value to show after execution: Hello!
Command completed in 3 msecs.

        </pre></div>
        </div>
        
<p>
          For more information about the JEXL syntax, see <a class="externalLink" href="http://commons.apache.org/proper/commons-jexl/reference/syntax.html">JEXL Syntax</a> page.
        </p>
      </div>

      
<div class="section">
<h3><a name="Extra_JARs_for_your_JEXL_scripts_or_others"></a>Extra JARs for your JEXL scripts or others</h3>
        
<p>
          If you need to depend on any additional JAR files, not included in the <tt>jcrshell-x.x.x.jar</tt> by default,
          you can use Spring Boot's <tt>loader.path</tt> system property to add any extra JARs to the classpath.
        </p>
        
<p>
          For example, the following will add all the JAR files found in <tt>lib/</tt> directory when executing the JCR Shell:
        </p>
        
<div class="brush: bash">
        
<div class="source"><pre>
$ java -Dloader.path=&quot;lib/&quot; \
       -jar jcrshell-2.0.0.jar \
       --server=&quot;http://localhost:8080/cms/server&quot; \
       --user=&quot;admin:admin&quot;

        </pre></div>
        </div>
      </div>

      
<div class="section">
<h3><a name="Run_Batch_Commands"></a>Run Batch Commands</h3>
        
<p>
          You can execute a batch file containing one or multiple lines of each command explained above as well
          by specifying <tt>--batch</tt> argument like the following example:
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre>
$ java -jar jcrshell-2.0.0.jar --server=&quot;http://localhost:8080/cms/server&quot; --user=&quot;admin:admin&quot; --batch=&quot;test.sh&quot;

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.0.4.RELEASE)

JCR Shell 2.0.0
...
        </pre></div>
        </div>
        
<p>
          If you specify a batch file by <tt>--batch</tt> argument, then JCR Shell will read all the non-blank
          lines from the file except of comment lines.
        </p>
        
<div class="alert alert-info">
          
<p>
            If a line in a batch file starts with &quot;#&quot;, the line is regarded as a comment.
          </p>
        </div>
      </div>

    </div>
  

    </div>
    </div>
    </div>
    <hr/>
    <footer>
    <div class="container-fluid">
      <div class="row-fluid">
          <p class="copyright">Copyright &copy;      2018.
  Hippo B.V. All rights reserved.
</p>
    </div>
            </div>
  </footer>
    </body>
</html>

